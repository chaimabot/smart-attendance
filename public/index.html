<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Espace Étudiant | Smart Attendance ISET</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="icon" href="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Logo_of_the_Tunisian_University.svg/1200px-Logo_of_the_Tunisian_University.svg.png" type="image/png">
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3f37c9;
            --danger: #f72585;
            --success: #4cc9f0;
            --warning: #f8961e;
            --dark: #212529;
            --light: #f8f9fa;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f5f7fa;
            color: var(--dark);
            overflow-x: hidden;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.18);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
            transition: all 0.3s ease;
        }
        
        .glass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.15);
        }
        
        .sidebar {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            position: fixed;
            width: 280px;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
        }
        
        .sidebar-brand {
            padding: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-nav .nav-link {
            color: rgba(255, 255, 255, 0.8);
            margin: 0.25rem 1rem;
            border-radius: 8px;
            padding: 0.75rem 1rem;
            display: flex;
            align-items: center;
            transition: all 0.3s ease;
        }
        
        .sidebar-nav .nav-link:hover, 
        .sidebar-nav .nav-link.active {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            transform: translateX(5px);
        }
        
        .sidebar-nav .nav-link i {
            margin-right: 12px;
            font-size: 1.1rem;
        }
        
        .main-content {
            margin-left: 280px;
            padding: 2rem;
            min-height: 100vh;
        }
        
        .stat-card {
            border-radius: 12px;
            overflow: hidden;
            transition: all 0.3s ease;
            position: relative;
            color: white;
            z-index: 1;
        }
        
        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(0,0,0,0.2), rgba(0,0,0,0.05));
            z-index: -1;
        }
        
        .stat-card-primary { background: linear-gradient(135deg, #4361ee, #3a0ca3); }
        .stat-card-danger { background: linear-gradient(135deg, #f72585, #b5179e); }
        .stat-card-warning { background: linear-gradient(135deg, #f8961e, #f3722c); }
        .stat-card-success { background: linear-gradient(135deg, #4cc9f0, #4895ef); }
        
        .badge-pill {
            border-radius: 50px;
            padding: 0.35em 0.65em;
            font-weight: 500;
        }
        
        .alert-custom {
            border-radius: 10px;
            border-left: 5px solid;
            background: white;
        }
        
        .alert-danger-custom {
            border-left-color: var(--danger);
            background: linear-gradient(to right, rgba(247, 37, 133, 0.05), white);
        }
        
        .alert-warning-custom {
            border-left-color: var(--warning);
            background: linear-gradient(to right, rgba(248, 150, 30, 0.05), white);
        }
        
        .table-custom {
            background: white;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .table-custom thead th {
            background: var(--primary);
            color: white;
            border: none;
        }
        
        .table-custom tbody tr {
            transition: all 0.2s ease;
        }
        
        .table-custom tbody tr:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .progress-custom {
            height: 8px;
            border-radius: 4px;
        }
        
        .progress-custom .progress-bar {
            border-radius: 4px;
        }
        
        .floating-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 5px 20px rgba(67, 97, 238, 0.3);
            z-index: 100;
            transition: all 0.3s ease;
        }
        
        .floating-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 8px 25px rgba(67, 97, 238, 0.4);
        }
        
        /* Nouveaux styles pour améliorations */
        .subject-card {
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .subject-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .subject-card-danger {
            border-left-color: var(--danger);
        }
        
        .subject-card-warning {
            border-left-color: var(--warning);
        }
        
        .subject-card-success {
            border-left-color: var(--success);
        }
        
        .justification-file {
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .justification-file:hover {
            border-color: var(--primary);
            background: rgba(67, 97, 238, 0.05);
        }
        
        .justification-file.active {
            border-color: var(--success);
            background: rgba(76, 201, 240, 0.05);
        }
        
        .risk-badge {
            font-size: 0.8rem;
            padding: 0.35rem 0.65rem;
            border-radius: 50px;
        }
        
        .risk-high {
            background-color: rgba(247, 37, 133, 0.2);
            color: var(--danger);
        }
        
        .risk-medium {
            background-color: rgba(248, 150, 30, 0.2);
            color: var(--warning);
        }
        
        .risk-low {
            background-color: rgba(76, 201, 240, 0.2);
            color: var(--success);
        }
        
        @media (max-width: 992px) {
            .sidebar {
                width: 80px;
                overflow: hidden;
            }
            
            .sidebar-brand span,
            .sidebar-nav .nav-link span {
                display: none;
            }
            
            .sidebar-nav .nav-link {
                justify-content: center;
            }
            
            .sidebar-nav .nav-link i {
                margin-right: 0;
                font-size: 1.3rem;
            }
            
            .main-content {
                margin-left: 80px;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                width: 100%;
                height: 70px;
                min-height: auto;
                bottom: 0;
                top: auto;
            }
            
            .sidebar-brand {
                display: none;
            }
            
            .sidebar-nav {
                display: flex;
            }
            
            .sidebar-nav .nav-link {
                flex-direction: column;
                padding: 0.5rem;
                font-size: 0.7rem;
            }
            
            .sidebar-nav .nav-link i {
                font-size: 1.2rem;
                margin-bottom: 0.25rem;
            }
            
            .main-content {
                margin-left: 0;
                margin-bottom: 70px;
                padding: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
<div class="sidebar-brand d-flex align-items-center">
    <img src="https://media.licdn.com/dms/image/C4D0BAQHMNRINAIPavQ/company-logo_200_200/0/1630580021818?e=2147483647&v=beta&t=9g8ARKOaFRMTjc4F-UdPukSnBzasujP3qB1co1kkSIk
         alt="Logo ISET" 
         style="width: 40px; height: 40px; object-fit: contain" 
         class="me-2">
    <span>Smart Attendance</span>
</div>
        
        <nav class="sidebar-nav mt-4">
            <a href="#dashboard" class="nav-link active">
                <i class="bi bi-speedometer2"></i>
                <span>Dashboard</span>
            </a>
            <a href="#absences" class="nav-link">
                <i class="bi bi-calendar-x"></i>
                <span>Mes Absences</span>
            </a>
            <a href="#justifications" class="nav-link">
                <i class="bi bi-file-earmark-arrow-up"></i>
                <span>Justifications</span>
            </a>
            <a href="#statistics" class="nav-link">
                <i class="bi bi-graph-up"></i>
                <span>Statistiques</span>
            </a>
            <a href="#predictions" class="nav-link">
                <i class="bi bi-robot"></i>
                <span>Prédictions IA</span>
            </a>
            <a href="#settings" class="nav-link mt-4">
                <i class="bi bi-gear"></i>
                <span>Paramètres</span>
            </a>
            <a href="#" class="nav-link text-danger" id="logout-btn">
                <i class="bi bi-box-arrow-right"></i>
                <span>Déconnexion</span>
            </a>
        </nav>
    </div>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- Dashboard Section -->
        <section id="dashboard" data-aos="fade-up">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="fw-bold mb-0">Tableau de Bord</h2>
                <div class="dropdown">
                    <button class="btn btn-outline-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown">
                        <i class="bi bi-person-circle me-2"></i><span id="student-name">John Doe</span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#settings"><i class="bi bi-person me-2"></i>Profil</a></li>
                        <li><a class="dropdown-item" href="#settings"><i class="bi bi-gear me-2"></i>Paramètres</a></li>
                        <li><hr class="dropdown-divider"></li>
                        <li><a class="dropdown-item text-danger" href="#" id="logout-btn-dropdown"><i class="bi bi-box-arrow-right me-2"></i>Déconnexion</a></li>
                    </ul>
                </div>
            </div>
            
            <!-- Alert Dynamique -->
            <div class="alert alert-danger-custom alert-custom mb-4" id="critical-alert" style="display: none;">
                <div class="d-flex align-items-center">
                    <i class="bi bi-exclamation-triangle-fill fs-3 me-3"></i>
                    <div>
                        <h5 class="alert-heading mb-1" id="alert-title">Alerte importante !</h5>
                        <p class="mb-0" id="alert-message"></p>
                    </div>
                </div>
            </div>
            
            <!-- Stats Cards -->
            <div class="row g-4 mb-4">
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="200">
                    <div class="stat-card stat-card-primary p-4 h-100">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="text-uppercase opacity-75 mb-1">Absences</h6>
                                <h2 class="mb-0" id="total-absences">0</h2>
                                <small class="opacity-75">Total cette année</small>
                            </div>
                            <i class="bi bi-calendar-x fs-3 opacity-50"></i>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="250">
                    <div class="stat-card stat-card-success p-4 h-100">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="text-uppercase opacity-75 mb-1">Justifiées</h6>
                                <h2 class="mb-0" id="justified-absences">0</h2>
                                <small class="opacity-75">Absences régularisées</small>
                            </div>
                            <i class="bi bi-check-circle fs-3 opacity-50"></i>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="300">
                    <div class="stat-card stat-card-warning p-4 h-100">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="text-uppercase opacity-75 mb-1">Retards</h6>
                                <h2 class="mb-0" id="total-delays">0</h2>
                                <small class="opacity-75">Retards cumulés</small>
                            </div>
                            <i class="bi bi-clock-history fs-3 opacity-50"></i>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 col-lg-3" data-aos="fade-up" data-aos-delay="350">
                    <div class="stat-card stat-card-primary p-4 h-100">
                        <div class="d-flex justify-content-between align-items-start">
                            <div>
                                <h6 class="text-uppercase opacity-75 mb-1">Matières</h6>
                                <h2 class="mb-0" id="total-subjects">0</h2>
                                <small class="opacity-75">Matières suivies</small>
                            </div>
                            <i class="bi bi-book fs-3 opacity-50"></i>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Recent Absences -->
            <div class="glass-card p-4 mb-4" data-aos="fade-up" data-aos-delay="400">
                <div class="d-flex justify-content-between align-items-center mb-3">
                    <h5 class="mb-0">Dernières absences</h5>
                    <a href="#absences" class="btn btn-sm btn-outline-primary">Voir tout</a>
                </div>
                
                <div class="row g-3" id="recent-absences-container">
                    <!-- Rempli dynamiquement par JavaScript -->
                    <div class="col-12 text-center py-4">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Chargement...</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Quick Actions -->
            <div class="row g-4" data-aos="fade-up" data-aos-delay="450">
                <div class="col-md-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-3">Actions rapides</h5>
                        <div class="row g-2">
                            <div class="col-6">
                                <a href="#justifications" class="btn btn-outline-primary w-100 d-flex flex-column align-items-center py-3">
                                    <i class="bi bi-file-earmark-arrow-up fs-3 mb-2"></i>
                                    <span>Justifier une absence</span>
                                </a>
                            </div>
                            <div class="col-6">
                                <a href="#" class="btn btn-outline-success w-100 d-flex flex-column align-items-center py-3" id="download-certificate-btn">
                                    <i class="bi bi-download fs-3 mb-2"></i>
                                    <span>Télécharger attestation</span>
                                </a>
                            </div>
                            <div class="col-6">
                                <a href="#" class="btn btn-outline-info w-100 d-flex flex-column align-items-center py-3" id="schedule-btn">
                                    <i class="bi bi-calendar-check fs-3 mb-2"></i>
                                    <span>Voir emploi du temps</span>
                                </a>
                            </div>
                            <div class="col-6">
                                <a href="#" class="btn btn-outline-warning w-100 d-flex flex-column align-items-center py-3" id="help-btn">
                                    <i class="bi bi-question-circle fs-3 mb-2"></i>
                                    <span>Aide & Support</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-3">Prochaines séances</h5>
                        <div class="list-group list-group-flush" id="next-sessions-container">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="text-center py-3">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Matières à risque -->
            <div class="glass-card p-4 mt-4" data-aos="fade-up" data-aos-delay="500">
                <h5 class="mb-3">Matières à risque</h5>
                <div class="row g-3" id="risk-subjects-container">
                    <!-- Rempli dynamiquement par JavaScript -->
                    <div class="col-12 text-center py-4">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Chargement...</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Absences Section -->
        <section id="absences" class="py-5" data-aos="fade-up">
            <div class="d-flex justify-content-between align-items-center mb-4">
                <h2 class="fw-bold mb-0">Mes Absences</h2>
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="exportDropdown" data-bs-toggle="dropdown">
                        <i class="bi bi-download me-2"></i>Exporter
                    </button>
                    <ul class="dropdown-menu">
                        <li><a class="dropdown-item" href="#" id="export-pdf"><i class="bi bi-filetype-pdf me-2"></i>PDF</a></li>
                        <li><a class="dropdown-item" href="#" id="export-excel"><i class="bi bi-file-excel me-2"></i>Excel</a></li>
                        <li><a class="dropdown-item" href="#" id="print-absences"><i class="bi bi-printer me-2"></i>Imprimer</a></li>
                    </ul>
                </div>
            </div>
            
            <div class="glass-card p-4">
                <div class="table-responsive">
                    <table class="table table-custom table-hover mb-0" id="absences-table">
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Matière</th>
                                <th>Séance</th>
                                <th>Type</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="absences-table-body">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <tr>
                                <td colspan="6" class="text-center py-5">
                                    <div class="spinner-border text-primary" role="status">
                                        <span class="visually-hidden">Chargement...</span>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Pagination -->
                <nav class="mt-4" id="absences-pagination">
                    <ul class="pagination justify-content-center">
                        <li class="page-item disabled">
                            <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Précédent</a>
                        </li>
                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item">
                            <a class="page-link" href="#">Suivant</a>
                        </li>
                    </ul>
                </nav>
            </div>
        </section>
        
        <!-- Justifications Section -->
        <section id="justifications" class="py-5" data-aos="fade-up">
            <h2 class="fw-bold mb-4">Justifications d'Absence</h2>
            
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-file-earmark-plus me-2"></i>Nouvelle justification</h5>
                        
                        <form id="justification-form">
                            <div class="mb-3">
                                <label class="form-label">Sélectionner l'absence</label>
                                <select class="form-select" id="absence-select" required>
                                    <option value="" selected disabled>Choisir une absence à justifier</option>
                                    <!-- Rempli dynamiquement par JavaScript -->
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Type de justification</label>
                                <select class="form-select" id="justification-type" required>
                                    <option value="" selected disabled>Choisir un type</option>
                                    <option value="medical">Médical</option>
                                    <option value="family">Familial</option>
                                    <option value="other">Autre</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label class="form-label">Commentaire</label>
                                <textarea class="form-control" id="justification-comment" rows="3" placeholder="Détails supplémentaires..." required></textarea>
                            </div>
                            
                            <div class="mb-4">
                                <label class="form-label">Joindre un fichier</label>
                                <div class="justification-file" id="file-upload-area">
                                    <i class="bi bi-cloud-arrow-up fs-1 text-muted mb-2"></i>
                                    <p class="mb-2">Glissez-déposez votre fichier ici ou cliquez pour sélectionner</p>
                                    <small class="text-muted">Formats acceptés: PDF, JPG, PNG (Max 2MB)</small>
                                    <input type="file" class="d-none" id="file-input" accept=".pdf,.jpg,.jpeg,.png">
                                    <div class="mt-2" id="file-name"></div>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100 py-2" id="submit-justification">
                                <i class="bi bi-send me-2"></i>Envoyer la justification
                            </button>
                        </form>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-clock-history me-2"></i>Historique des justifications</h5>
                        
                        <div class="list-group list-group-flush" id="justifications-history">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="text-center py-5">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Statistics Section -->
        <section id="statistics" class="py-5" data-aos="fade-up">
            <h2 class="fw-bold mb-4">Statistiques et Analyses</h2>
            
            <div class="row g-4 mb-4">
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-3">Absences par matière</h5>
                        <canvas id="subjectChart" height="300"></canvas>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-3">Évolution mensuelle</h5>
                        <canvas id="monthlyChart" height="300"></canvas>
                    </div>
                </div>
            </div>
            
            <div class="glass-card p-4">
                <h5 class="mb-3">Comparaison avec la classe</h5>
                <canvas id="comparisonChart" height="350"></canvas>
            </div>
        </section>
        
        <!-- AI Predictions Section -->
        <section id="predictions" class="py-5" data-aos="fade-up">
            <h2 class="fw-bold mb-4">Prédictions d'Analyse IA</h2>
            
            <div class="glass-card p-4 mb-4">
                <div class="d-flex align-items-center mb-3">
                    <i class="bi bi-info-circle-fill text-info me-2"></i>
                    <p class="mb-0">Ces prédictions sont basées sur vos absences, retards et performances antérieures, analysées par notre algorithme d'intelligence artificielle.</p>
                </div>
            </div>
            
            <div class="row g-4">
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-exclamation-triangle-fill text-warning me-2"></i>Risque d'échec par matière</h5>
                        
                        <div id="risk-subjects-details">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-lightbulb-fill text-warning me-2"></i>Recommandations personnalisées</h5>
                        
                        <div id="ai-recommendations">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="text-center py-4">
                                <div class="spinner-border text-primary" role="status">
                                    <span class="visually-hidden">Chargement...</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Settings Section -->
        <section id="settings" class="py-5" data-aos="fade-up">
            <h2 class="fw-bold mb-4">Paramètres du compte</h2>
            
            <div class="row g-4">
                <div class="col-lg-4">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-person-badge me-2"></i>Profil étudiant</h5>
                        
                        <div class="text-center mb-4">
<img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Photo de profil" class="rounded-circle mb-3" width="120" id="profile-picture" style="border: 3px solid #4361ee;">
                        </div>
                        
                        <form id="profile-form">
                            <div class="mb-3">
                                <label class="form-label">Nom complet</label>
                                <input type="text" class="form-control" id="full-name" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Numéro de téléphone</label>
                                <input type="tel" class="form-control" id="phone">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Groupe</label>
                                <input type="text" class="form-control" id="group" disabled>
                            </div>
                            <button type="submit" class="btn btn-primary w-100 mt-2">Mettre à jour</button>
                        </form>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-bell me-2"></i>Notifications</h5>
                        
                        <form id="notifications-form">
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="notif-absences" checked>
                                <label class="form-check-label" for="notif-absences">Nouvelles absences</label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="notif-justifications" checked>
                                <label class="form-check-label" for="notif-justifications">Statut des justifications</label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="notif-alerts">
                                <label class="form-check-label" for="notif-alerts">Alertes critiques</label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="notif-sessions" checked>
                                <label class="form-check-label" for="notif-sessions">Rappels de séances</label>
                            </div>
                            <div class="form-check form-switch mb-3">
                                <input class="form-check-input" type="checkbox" id="notif-newsletter">
                                <label class="form-check-label" for="notif-newsletter">Newsletter mensuelle</label>
                            </div>
                            
                            <hr class="my-4">
                            
                            <h6 class="mb-3">Méthode de notification</h6>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="notif-method" id="notif-email" checked>
                                <label class="form-check-label" for="notif-email">Email</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="radio" name="notif-method" id="notif-sms">
                                <label class="form-check-label" for="notif-sms">SMS</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="radio" name="notif-method" id="notif-both">
                                <label class="form-check-label" for="notif-both">Les deux</label>
                            </div>
                            
                            <button type="submit" class="btn btn-primary w-100 mt-4">Enregistrer</button>
                        </form>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <div class="glass-card p-4 h-100">
                        <h5 class="mb-4"><i class="bi bi-shield-lock me-2"></i>Sécurité</h5>
                        
                        <form id="security-form">
                            <div class="mb-3">
                                <label class="form-label">Mot de passe actuel</label>
                                <input type="password" class="form-control" id="current-password" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Nouveau mot de passe</label>
                                <input type="password" class="form-control" id="new-password" required>
                            </div>
                            <div class="mb-3">
                                <label class="form-label">Confirmer le nouveau mot de passe</label>
                                <input type="password" class="form-control" id="confirm-password" required>
                            </div>
                            <button type="submit" class="btn btn-primary w-100">Changer le mot de passe</button>
                        </form>
                        
                        <hr class="my-4">
                        
                        <h6 class="mb-3">Connexions actives</h6>
                        <div class="list-group list-group-flush mb-3" id="active-sessions">
                            <!-- Rempli dynamiquement par JavaScript -->
                            <div class="text-center py-3">
                                <div class="spinner-border text-primary">
                                                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-outline-danger w-100 mt-2" id="logout-all-btn">
                            <i class="bi bi-box-arrow-right me-2"></i>Déconnecter tous les appareils
                        </button>
                    </div>
                </div>
            </div>
        </section>
    </main>
    
    <!-- Floating Button -->
    <a href="#justifications" class="floating-btn" data-aos="fade-up" data-aos-delay="600">
        <i class="bi bi-plus-lg"></i>
    </a>
    
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- AOS Animation -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    <!-- Custom Script -->
    <script>
        // Initialize AOS animation
        AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
        });
        
        // Sample data for demonstration
        const studentData = {
            name: "Mohamed Ben Salah",
            absences: 12,
            justified: 5,
            delays: 8,
            subjects: 7,
            recentAbsences: [
                { date: "2023-05-15", subject: "Mathématiques", session: "Cours", type: "Absence", status: "Non justifiée", risk: "high" },
                { date: "2023-05-10", subject: "Physique", session: "TP", type: "Retard", status: "Justifiée", risk: "medium" },
                { date: "2023-05-05", subject: "Informatique", session: "TD", type: "Absence", status: "En attente", risk: "low" }
            ],
            nextSessions: [
                { date: "2023-06-02", time: "08:30", subject: "Mathématiques", room: "B12" },
                { date: "2023-06-02", time: "10:30", subject: "Physique", room: "Labo A" },
                { date: "2023-06-03", time: "14:00", subject: "Informatique", room: "Salle Info 3" }
            ],
            riskSubjects: [
                { subject: "Mathématiques", absences: 4, risk: "high", progress: 35 },
                { subject: "Physique", absences: 3, risk: "medium", progress: 55 },
                { subject: "Chimie", absences: 2, risk: "low", progress: 70 }
            ]
        };
        
        // Populate dashboard with sample data
        document.addEventListener('DOMContentLoaded', function() {
            // Set student name
            document.getElementById('student-name').textContent = studentData.name;
            
            // Set stats
            document.getElementById('total-absences').textContent = studentData.absences;
            document.getElementById('justified-absences').textContent = studentData.justified;
            document.getElementById('total-delays').textContent = studentData.delays;
            document.getElementById('total-subjects').textContent = studentData.subjects;
            
            // Populate recent absences
            const recentAbsencesContainer = document.getElementById('recent-absences-container');
            recentAbsencesContainer.innerHTML = '';
            
            studentData.recentAbsences.forEach(absence => {
                const statusClass = absence.status === "Justifiée" ? "success" : 
                                  absence.status === "En attente" ? "warning" : "danger";
                
                const card = document.createElement('div');
                card.className = 'col-md-4';
                card.innerHTML = `
                    <div class="subject-card subject-card-${absence.risk} p-3 h-100">
                        <div class="d-flex justify-content-between align-items-start mb-2">
                            <h6 class="mb-0">${absence.subject}</h6>
                            <span class="badge bg-${statusClass}">${absence.status}</span>
                        </div>
                        <p class="text-muted small mb-2">${new Date(absence.date).toLocaleDateString('fr-FR')} - ${absence.session}</p>
                        <div class="d-flex justify-content-between align-items-center">
                            <span class="small">${absence.type}</span>
                            <button class="btn btn-sm btn-outline-primary">Détails</button>
                        </div>
                    </div>
                `;
                recentAbsencesContainer.appendChild(card);
            });
            
            // Populate next sessions
            const nextSessionsContainer = document.getElementById('next-sessions-container');
            nextSessionsContainer.innerHTML = '';
            
            studentData.nextSessions.forEach(session => {
                const item = document.createElement('a');
                item.className = 'list-group-item list-group-item-action border-0 py-3';
                item.innerHTML = `
                    <div class="d-flex justify-content-between align-items-center">
                        <div>
                            <h6 class="mb-1">${session.subject}</h6>
                            <small class="text-muted">${new Date(session.date).toLocaleDateString('fr-FR', { weekday: 'long', day: 'numeric', month: 'long' })} à ${session.time}</small>
                        </div>
                        <span class="badge bg-primary rounded-pill">${session.room}</span>
                    </div>
                `;
                nextSessionsContainer.appendChild(item);
            });
            
            // Populate risk subjects
            const riskSubjectsContainer = document.getElementById('risk-subjects-container');
            riskSubjectsContainer.innerHTML = '';
            
            studentData.riskSubjects.forEach(subject => {
                const progressClass = subject.risk === "high" ? "danger" : 
                                    subject.risk === "medium" ? "warning" : "success";
                
                const card = document.createElement('div');
                card.className = 'col-md-4';
                card.innerHTML = `
                    <div class="glass-card p-3 h-100">
                        <div class="d-flex justify-content-between align-items-center mb-2">
                            <h6 class="mb-0">${subject.subject}</h6>
                            <span class="risk-badge risk-${subject.risk}">${subject.risk === "high" ? "Élevé" : subject.risk === "medium" ? "Moyen" : "Faible"}</span>
                        </div>
                        <p class="text-muted small mb-2">${subject.absences} absences</p>
                        <div class="progress progress-custom mb-2">
                            <div class="progress-bar bg-${progressClass}" role="progressbar" style="width: ${subject.progress}%" aria-valuenow="${subject.progress}" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <small class="text-muted">Progression: ${subject.progress}%</small>
                    </div>
                `;
                riskSubjectsContainer.appendChild(card);
            });
            
            // Initialize charts
            initCharts();
            
            // File upload interaction
            const fileUploadArea = document.getElementById('file-upload-area');
            const fileInput = document.getElementById('file-input');
            const fileName = document.getElementById('file-name');
            
            fileUploadArea.addEventListener('click', () => fileInput.click());
            
            fileInput.addEventListener('change', () => {
                if (fileInput.files.length > 0) {
                    fileUploadArea.classList.add('active');
                    fileName.innerHTML = `<i class="bi bi-file-earmark-text me-2"></i>${fileInput.files[0].name}`;
                }
            });
            
            // Drag and drop for file upload
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                fileUploadArea.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                fileUploadArea.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                fileUploadArea.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                fileUploadArea.classList.add('bg-light');
            }
            
            function unhighlight() {
                fileUploadArea.classList.remove('bg-light');
            }
            
            fileUploadArea.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                fileInput.files = files;
                if (files.length > 0) {
                    fileUploadArea.classList.add('active');
                    fileName.innerHTML = `<i class="bi bi-file-earmark-text me-2"></i>${files[0].name}`;
                }
            }
            
            // Logout buttons
            const logoutButtons = document.querySelectorAll('#logout-btn, #logout-btn-dropdown');
            logoutButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    // In a real app, this would redirect to logout endpoint
                    alert('Déconnexion effectuée avec succès');
                    window.location.href = 'login.html';
                });
            });
            
            // Show critical alert if needed
            if (studentData.absences > 10) {
                const alert = document.getElementById('critical-alert');
                alert.style.display = 'block';
                document.getElementById('alert-title').textContent = 'Attention : Nombre élevé d\'absences';
                document.getElementById('alert-message').textContent = `Vous avez ${studentData.absences} absences cette année. Certaines matières sont à risque. Consultez la section "Prédictions IA" pour plus de détails.`;
            }
        });
        
        function initCharts() {
            // Subject Chart
            const subjectCtx = document.getElementById('subjectChart').getContext('2d');
            const subjectChart = new Chart(subjectCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Mathématiques', 'Physique', 'Informatique', 'Chimie', 'Anglais', 'Électronique', 'Mécanique'],
                    datasets: [{
                        data: [4, 3, 2, 1, 1, 1, 0],
                        backgroundColor: [
                            '#f72585',
                            '#f8961e',
                            '#4cc9f0',
                            '#4361ee',
                            '#7209b7',
                            '#3a0ca3',
                            '#4895ef'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'right',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.label}: ${context.raw} absences`;
                                }
                            }
                        }
                    },
                    cutout: '70%'
                }
            });
            
            // Monthly Chart
            const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
            const monthlyChart = new Chart(monthlyCtx, {
                type: 'line',
                data: {
                    labels: ['Jan', 'Fév', 'Mar', 'Avr', 'Mai', 'Juin', 'Juil', 'Août', 'Sep', 'Oct', 'Nov', 'Déc'],
                    datasets: [{
                        label: 'Absences',
                        data: [0, 1, 2, 1, 3, 2, 0, 0, 1, 2, 0, 0],
                        borderColor: '#f72585',
                        backgroundColor: 'rgba(247, 37, 133, 0.1)',
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Retards',
                        data: [0, 0, 1, 2, 1, 2, 0, 0, 1, 1, 0, 0],
                        borderColor: '#f8961e',
                        backgroundColor: 'rgba(248, 150, 30, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
            
            // Comparison Chart
            const comparisonCtx = document.getElementById('comparisonChart').getContext('2d');
            const comparisonChart = new Chart(comparisonCtx, {
                type: 'bar',
                data: {
                    labels: ['Mathématiques', 'Physique', 'Informatique', 'Chimie', 'Anglais'],
                    datasets: [{
                        label: 'Moyenne de la classe',
                        data: [1.2, 1.5, 0.8, 0.7, 0.5],
                        backgroundColor: 'rgba(67, 97, 238, 0.5)'
                    }, {
                        label: 'Vos absences',
                        data: [4, 3, 2, 1, 1],
                        backgroundColor: 'rgba(247, 37, 133, 0.5)'
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw} absences`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: {
                                stepSize: 1
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>